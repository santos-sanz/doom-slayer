<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="Doom Slayer - A web-based doomscrolling blocker that uses AI to detect when you're looking at your phone and roasts you to get back to work!">
  <meta name="theme-color" content="#0a0a0f">
  <link rel="icon" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Ctext y='0.9em' font-size='90'%3E%F0%9F%92%80%3C/text%3E%3C/svg%3E">
  
  <title>Doom Slayer - Stop Doomscrolling, Start Living</title>
  
  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@500;600;700&family=Manrope:wght@400;500;700;800&display=swap" rel="stylesheet">
  
  <!-- MediaPipe FaceMesh -->
  <script src="https://cdn.jsdelivr.net/npm/@mediapipe/camera_utils/camera_utils.js" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/@mediapipe/face_mesh/face_mesh.js" crossorigin="anonymous"></script>
  
  <!-- TensorFlow.js + COCO-SSD for phone detection -->
  <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs@4.20.0" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/@tensorflow-models/coco-ssd@2.2.3" crossorigin="anonymous"></script>
  
  <!-- Styles -->
  <link rel="stylesheet" href="css/styles.css">
</head>
<body>
  <!-- Landing Section -->
  <section id="landing" class="landing">
    <p class="kicker">AI Focus Sentinel</p>
    <div class="logo">ğŸ’€</div>
    <h1>Doom Slayer</h1>
    <p class="tagline">
      Stop doomscrolling. Start living. AI-powered focus assistant that catches you looking at your phone and roasts you back to productivity.
    </p>
    
    <div class="features">
      <div class="feature-card">
        <div class="icon">ğŸ¯</div>
        <h3>AI Face Tracking</h3>
        <p>Real-time detection using TensorFlow.js - no data leaves your device.</p>
      </div>
      <div class="feature-card">
        <div class="icon">ğŸ”¥</div>
        <h3>Motivational Roasts</h3>
        <p>Harsh but effective messages to snap you back to reality.</p>
      </div>
      <div class="feature-card">
        <div class="icon">ğŸµ</div>
        <h3>Rickroll Punishment</h3>
        <p>Got caught? Enjoy some Never Gonna Give You Up until you're back on track.</p>
      </div>
    </div>
    
    <button id="startBtn" class="btn btn-primary" type="button" aria-label="Start monitoring your posture and focus">
      <span>ğŸš€</span> Start Monitoring
    </button>

    <div class="landing-stats" aria-label="Live system highlights">
      <div class="landing-stat">
        <span class="value">468</span>
        <span class="label">Face Points</span>
      </div>
      <div class="landing-stat">
        <span class="value">10 FPS</span>
        <span class="label">Realtime Scan</span>
      </div>
      <div class="landing-stat">
        <span class="value">100%</span>
        <span class="label">Local Privacy</span>
      </div>
    </div>
    
    <div class="privacy-badge">
      <span>ğŸ”’</span> 100% Private â€¢ No Backend â€¢ Client-side Only
    </div>
  </section>

  <!-- Monitor Section -->
  <section id="monitor" class="monitor hidden">
    <div class="container">
      <header class="monitor-header">
        <div class="monitor-title">
          <span style="font-size: 1.5rem;">ğŸ’€</span>
          <h2>Doom Slayer Active</h2>
        </div>
        <div class="monitor-controls">
          <span id="fpsDisplay" aria-live="polite">-- FPS</span>
          <button id="pipBtn" class="btn btn-secondary btn-icon" type="button" aria-label="Toggle Picture-in-Picture mode" title="Enable Picture-in-Picture (keeps working in background)">ğŸ“Œ</button>
          <button id="settingsBtn" class="btn btn-secondary btn-icon" type="button" aria-label="Open settings panel" title="Settings" aria-expanded="false" aria-controls="settingsPanel">âš™ï¸</button>
          <button id="stopBtn" class="btn btn-danger" type="button">Stop</button>
        </div>
      </header>
      
      <div class="video-container">
        <video id="webcam" autoplay playsinline muted></video>
        <canvas id="overlay"></canvas>
        
        <div id="statusOverlay" class="status-overlay monitoring" role="status" aria-live="polite" aria-atomic="true">
          <div class="status-content">
            <span id="statusIcon">ğŸ‘€</span>
            <div class="status-text">
              <h3 id="statusMessage">Initializingâ€¦</h3>
              <p id="roastText"></p>
            </div>
          </div>
        </div>
      </div>
      
      <!-- Statistics Panel -->
      <div class="stats-panel">
        <div class="stat-card focused">
          <div class="stat-icon">âœ…</div>
          <div class="stat-info">
            <span class="stat-value" id="focusedTime">0:00</span>
            <span class="stat-label">Focused</span>
          </div>
        </div>
        <div class="stat-card distracted">
          <div class="stat-icon">ğŸ“±</div>
          <div class="stat-info">
            <span class="stat-value" id="distractedTime">0:00</span>
            <span class="stat-label">Distracted</span>
          </div>
        </div>
        <div class="stat-card alerts">
          <div class="stat-icon">ğŸš¨</div>
          <div class="stat-info">
            <span class="stat-value" id="alertCount">0</span>
            <span class="stat-label">Alerts</span>
          </div>
        </div>
        <button id="resetStatsBtn" class="btn btn-secondary btn-sm" type="button" title="Reset Statistics">ğŸ”„ Reset</button>
      </div>
    </div>
    
    <!-- Rickroll Container -->
    <div id="rickrollContainer" class="rickroll-container hidden">
      <iframe 
        id="rickrollIframe"
        title="Punishment video player"
        referrerpolicy="strict-origin-when-cross-origin"
        allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
        allowfullscreen>
      </iframe>
    </div>
  </section>

  <!-- Settings Panel -->
  <div id="settingsPanel" class="settings-panel hidden" role="dialog" aria-modal="true" aria-labelledby="settingsTitle">
    <div class="settings-header">
      <h3 id="settingsTitle">âš™ï¸ Settings</h3>
      <button id="closeSettings" class="btn btn-secondary btn-icon" type="button" aria-label="Close settings panel" style="width: 36px; height: 36px;">âœ•</button>
    </div>
    
    <div class="setting-group">
      <label for="sensitivity">
        Detection Sensitivity
        <span id="sensitivityValue" class="setting-value">55%</span>
      </label>
      <input type="range" id="sensitivity" min="40" max="70" value="55">
      <p style="font-size: 0.8rem; color: var(--text-muted); margin-top: 0.5rem;">
        Lower = more sensitive (triggers easier)<br>
        Higher = less sensitive (more tolerance)
      </p>
    </div>
    
    <div class="setting-group">
      <label for="videoUrl">Punishment Video (YouTube URL)</label>
      <input type="text" id="videoUrl" class="input-text" 
             placeholder="https://www.youtube.com/watch?v=..." 
             value="https://www.youtube.com/watch?v=dQw4w9WgXcQ">
      <p style="font-size: 0.8rem; color: var(--text-muted); margin-top: 0.5rem;">
        Video will be buffered for instant playback
      </p>
    </div>
  </div>

  <!-- App Script (ES Module) -->
  <script type="module" src="js/app.js"></script>
</body>
</html>
